---
description: "Meta-map of rule groups, precedence, and profiles."
category: "governance"
subcategory: "meta-map"
required: true
globs:
  - "**/*"
---

[SOURCE OF TRUTH]
- Editable source: `rules/11-meta-map.mdc`
- Generated/consumed copy: `.cursor/rules/11-meta-map.mdc` (keep references intact)

[INTENT]
- Define rule group hierarchy and precedence across Aegis Codex; spine grouping and ordering.

[APPLICABILITY]
- Applies to all agents and profiles; establishes non-negotiable ordering unless valid risk override per `.cursor/rules/3G-risk-overrides.mdc` is explicit.

[CROSS-REFERENCES]
- Architecture/DDD: `.cursor/rules/36-architecture.mdc`, `.cursor/rules/44-ddd.mdc` (binding)
- Testing/change-discipline: `.cursor/rules/31-testing.mdc`, `.cursor/rules/23-change-control.mdc` (binding)
- Risk overrides: `.cursor/rules/3G-risk-overrides.mdc` (explicit overrides only)

[CONCEPTS]
- Rule groups:
  - Rules are organized into coherent groups (architecture, security, change-discipline, data, config/env, flags/rollouts, observability/ops, AI governance/multi-agent, language/stack) that together define the Aegis Codex.
  - For non-Tier-S services (Tier M/H bounded contexts in `.cursor/rules/36-architecture.mdc`), these groups form a **spine** that cannot be disabled or weakened by profiles.
- Precedence:
  - Global invariants, architecture/DDD, security, and change-discipline rules take precedence over stylistic preferences or local conventions.
  - Language rules (50-lang-*.mdc, HTML/CSS/accessibility) extend and refine behavior within this spine; they MUST NOT contradict or weaken it.


[RULE GROUPS & PRIORITY ORDER]
1. **Architecture & DDD**
   - `.cursor/rules/36-architecture.mdc`
   - `.cursor/rules/44-ddd.mdc`
   - `.cursor/rules/38-anti-corruption-events.mdc`

2. **Security & Threat Modeling & AI Governance**
   - `.cursor/rules/30-security.mdc`
   - `.cursor/rules/30-threat-modeling.mdc`
   - `.cursor/rules/22-ai-assistants.mdc`

3. **Change Discipline & Contracts**
   - `.cursor/rules/23-change-control.mdc`
   - `.cursor/rules/45-bugfix-protocol.mdc`
   - `.cursor/rules/46-regression-discipline.mdc`
   - `.cursor/rules/47-diff-discipline.mdc`
   - `.cursor/rules/48-doc-sync.mdc`
   - `.cursor/rules/35-api-lifecycle.mdc`

4. **Data & Persistence**
   - `.cursor/rules/3B-data-persistence.mdc`

5. **Config & Environments**
   - `.cursor/rules/3E-config-environments.mdc`

6. **Feature Flags & Rollouts**
   - `.cursor/rules/3F-feature-flags-rollouts.mdc`

7. **Observability & Operations**
   - `.cursor/rules/32-observability.mdc`
   - `.cursor/rules/3D-operations.mdc`

8. **AI Governance & Multi-Agent**
   - `.cursor/rules/00-persona.mdc`
   - `.cursor/rules/10-global.mdc`
   - `.cursor/rules/11-meta-map.mdc`
   - `.cursor/rules/20-agents.mdc`
   - `.cursor/rules/21-orchestration.mdc`
   - `.cursor/rules/3G-risk-overrides.mdc`

9. **Language / Stack & Accessibility**
   - `.cursor/rules/50-lang-*.mdc`
   - `.cursor/rules/39-accessibility.mdc`


[PRECEDENCE & INTERACTION]
- **MANDATORY:** For backend/domain code (services, APIs, workers, CLI that implement business logic):
  - Architecture & DDD (36/44/38), Security & Threat Modeling & AI Governance (30/30-threat-modeling/22), and Change Discipline & Contracts (23/45/46/47/48/35) define non-negotiable constraints.
  - Data (3B), Config & Environments (3E), Feature Flags & Rollouts (3F), and Observability & Operations (32/3D) further constrain how such systems are configured and run.
  - Language rules (e.g. `.cursor/rules/50-lang-typescript.mdc`, `.cursor/rules/50-lang-php.mdc`) MUST extend these constraints and MAY NOT weaken them.
- **MANDATORY:** For frontend/markup (HTML/CSS/JS in pure presentation roles):
  - Clean/Hex/DDD layering and bounded-context structure still apply at the system level, but individual HTML/CSS files follow:
    - `.cursor/rules/50-lang-html.mdc`
    - `.cursor/rules/50-lang-css.mdc`
    - `.cursor/rules/39-accessibility.mdc`
  - Frontend code MUST still respect security and data-handling requirements from `.cursor/rules/30-security.mdc` and `.cursor/rules/3B-data-persistence.mdc` (no leaking secrets, no unsafe inline scripts that break backend guarantees).
- **MANDATORY:** In case of conflict:
  - Architecture & DDD (36/44/38), Security/Threat Modeling & AI Governance (30/30-threat-modeling/22), and Change Discipline (23/45/46/47/48/35) ALWAYS override style or ergonomics preferences defined in language rules.


[RULE BUILDER PROFILES]
- Profiles:
  - Rule Builder profiles select appropriate subsets of rules for different contexts (backend, frontend, utilities), but MUST NOT disable the core spine for real services.
- **MANDATORY:** For any non-Tier-S backend/service profile (Tier M/H contexts):
  - Profiles MUST always include, at minimum:
    - Architecture & DDD: `36-architecture.mdc`, `44-ddd.mdc`, `38-anti-corruption-events.mdc`
    - Security & Threat Modeling & AI Governance: `30-security.mdc`, `30-threat-modeling.mdc`, `22-ai-assistants.mdc`
    - Change Discipline & Contracts: `23-change-control.mdc`, `45-bugfix-protocol.mdc`, `46-regression-discipline.mdc`, `47-diff-discipline.mdc`, `48-doc-sync.mdc`, `35-api-lifecycle.mdc`
    - Data & Persistence: `3B-data-persistence.mdc`
    - Config & Environments: `3E-config-environments.mdc`
    - Feature Flags & Rollouts: `3F-feature-flags-rollouts.mdc`
    - Observability & Operations: `32-observability.mdc`, `3D-operations.mdc`
    - AI Governance & Multi-Agent: `00-persona.mdc`, `10-global.mdc`, `11-meta-map.mdc`, `20-agents.mdc`, `21-orchestration.mdc`, `3G-risk-overrides.mdc`
    - Appropriate `50-lang-*.mdc` files for the stack.
- **MANDATORY:** A project CANNOT claim Aegis Codex compliance for backend services if any of the above are disabled or treated as "optional suggestions" in its profile.

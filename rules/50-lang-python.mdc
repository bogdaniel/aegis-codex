---
description: "Python standards: typing, linting, testing."
required: false
category: "language"
subcategory: "python"
globs:
  - "**/*.py"
---

[SOURCE OF TRUTH]
- Editable source: `rules/50-lang-python.mdc`
- Generated/consumed copy: `.cursor/rules/50-lang-python.mdc` (keep references intact)

[INTENT]
- Define Python standards (architecture alignment, testing, security).

[APPLICABILITY]
- Applies to Python code; must align with architecture/security/testing spine unless explicit risk override per `.cursor/rules/3G-risk-overrides.mdc`.

[CROSS-REFERENCES]
- Architecture/DDD: `.cursor/rules/36-architecture.mdc`, `.cursor/rules/44-ddd.mdc` (binding)
- Testing/change-discipline: `.cursor/rules/31-testing.mdc`, `.cursor/rules/23-change-control.mdc` (binding)
- Risk overrides: `.cursor/rules/3G-risk-overrides.mdc` (explicit overrides only)

[PYTHON STANDARDS]
- Stack: Python 3.11+ with venv/uv/poetry; pin deps in `pyproject` + lock; avoid unpinned `pip install -r` without hashes.
- Style/lint: `ruff check .` plus `black --check .` and `isort .`; fix unused imports/code.
- Typing: `pyright` or `mypy --strict`; no `type: ignore` without justification; prefer dataclasses/pydantic for structured data.
- Safety: validate inputs (pydantic); no eval/exec; parameterized DB/ORM; context managers for resources; sanitize logs; secrets via env/manager.
- Testing: `pytest -q` with coverage; mock IO; cover edge/error paths; freeze time for determinism.
- Security/deps: `bandit -r .`; `pip-audit` or `uv pip audit`; forbid hardcoded creds.
- Performance: avoid N+1; prefer generators for streams; timeouts/retries with jitter; cap concurrency with semaphores.
- Verification artifact: `ruff check . && black --check . && isort . && mypy --strict . && pytest -q && bandit -r . && pip-audit`.

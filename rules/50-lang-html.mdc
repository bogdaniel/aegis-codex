---
description: "HTML standards — semantic structure, accessibility, and head/document hygiene."
required: false
category: "language"
subcategory: "html"
globs:
  - "src/**/*.html"
  - "public/**/*.html"
  - "resources/views/**/*.html"
  - "templates/**/*.html"
  - "frontend/**/*.html"
---

[SOURCE OF TRUTH]
- Editable source: `rules/50-lang-html.mdc`
- Generated/consumed copy: `.cursor/rules/50-lang-html.mdc` (keep references intact)

[INTENT]
- Define HTML standards (structure, semantics, accessibility) aligned with Aegis Codex.

[APPLICABILITY]
- Applies to HTML/UI code; must align with accessibility/security requirements unless explicit risk override per `.cursor/rules/3G-risk-overrides.mdc`.

[CROSS-REFERENCES]
- Architecture/DDD: `.cursor/rules/36-architecture.mdc`, `.cursor/rules/44-ddd.mdc` (binding)
- Testing/change-discipline: `.cursor/rules/31-testing.mdc`, `.cursor/rules/23-change-control.mdc` (binding)
- Risk overrides: `.cursor/rules/3G-risk-overrides.mdc` (explicit overrides only)

[HTML — SEMANTICS, ACCESSIBILITY & DOCUMENT STRUCTURE]

[BASELINE]
- HTML must be:
  - Semantic: elements reflect their purpose, not just used for styling.
  - Accessible: usable via keyboard and assistive technologies.
  - Predictable: consistent structure across pages, clear headings and landmarks.
- Align with docs/architecture/design-principles.md and accessibility rule (39-accessibility.mdc).

[DOCUMENT SKELETON & HEAD HYGIENE]
- Document:
  - Always use `<!doctype html>`, `<html lang="...">`, `<head>`, `<body>`.
  - Set `lang` correctly for the primary language of the page.
- `<head>`:
  - Include a descriptive `<title>` and relevant `<meta name="description">`.
  - Include `<meta charset="utf-8">` and responsive viewport `<meta name="viewport" content="width=device-width, initial-scale=1">`.
  - Only load necessary assets; avoid blocking scripts/styles where possible.
  - Use `<link rel="canonical">`, `<meta name="robots">`, and social metadata (Open Graph/Twitter) for public pages where appropriate.
- Scripts & styles:
  - Prefer external JS/CSS files for production code; inline only small snippets for demos/tests.
  - Use `defer`/`async` for scripts where safe; avoid blocking rendering unnecessarily.

[SEMANTIC LAYOUT & STRUCTURE]
- Landmarks:
  - Use `<header>`, `<nav>`, `<main>`, `<section>`, `<article>`, `<aside>`, `<footer>` appropriately.
  - Each page must have a single `<main>` element representing primary content.
- Headings:
  - Use one `<h1>` per document (or per main content region in SPA subtrees) and descending `<h2>`, `<h3>` for subsections.
  - Do not skip levels purely for styling; use CSS for visual size.
- Sections:
  - Group related content in `<section>`/`<article>` and label them with headings or `aria-labelledby`.
  - Avoid unstructured `div` soup; use semantic elements whenever possible.

[FORMS & INTERACTIVITY]
- Forms:
  - Each input must have a proper `<label>` associated via `for`/`id` or by wrapping the control.
  - Use `<fieldset>`/`<legend>` to group related controls (e.g., password fields, notification settings).
  - Use appropriate input types (`email`, `tel`, `url`, `number`, `password`, etc.) to leverage native validation and mobile keyboards.
- Validation & errors:
  - Place error messages near the relevant fields; associate them via `aria-describedby` if necessary.
  - Mark invalid fields with `aria-invalid="true"` and provide clear text explaining the issue.
- Interactivity:
  - Use native interactive elements (`<button>`, `<a>`, `<input>`, `<select>`) instead of clickable `div`/`span` where possible.
  - When non-native elements must be interactive, provide appropriate `role`, `tabindex`, and keyboard handling.
- Primary actions and invariants:
  - For forms with required fields and client-side validation, the primary action (e.g., “Save”, “Submit”) should start disabled and only become enabled when the form is valid according to the validators.
  - This invariant (“button disabled until form is valid”) must be enforced in code (see 50-lang-javascript.mdc) and verified via tests or a demo harness, not only assumed from markup.

[ACCESSIBILITY & SEO]
- Accessibility:
  - Provide alt text for meaningful images; use empty alt (`alt=""`) for decorative images.
  - Ensure keyboard access to all interactive elements; do not trap focus unintentionally.
  - Use ARIA roles and attributes sparingly, only when native semantics are insufficient.
  - For complex widgets (modals, dialogs, menus), follow established patterns: roles, `aria-modal`, `aria-expanded`, and focus management.
- SEO:
  - Use meaningful titles, headings, and link text (no “click here”).
  - Avoid content hidden to sighted users but visible to search engines solely for keyword stuffing.
  - Use structured data (JSON-LD) when appropriate for public marketing pages.

[ANTI-PATTERNS]
- Presentational markup (e.g., `<b>`, `<i>` instead of `<strong>`, `<em>`) used for meaning.
- Overuse of generic `<div>` and `<span>` where semantic elements exist.
- Inline event handlers (`onclick=""`, `onchange=""`) in production code; prefer JS modules and event listeners.
- Hard-coded text without language and direction metadata when mixed languages or RTL/LTR issues apply.
- Missing `lang` attribute, missing `title`/`meta description` on important pages.

[VERIFICATION]
- For each HTML change:
  - Run an HTML validator (W3C or tooling equivalent) to detect structural errors.
  - Perform a quick keyboard-only walkthrough for key flows (Tab/Shift+Tab, Enter/Space).
  - Use automated tools (Lighthouse, axe, or similar) where available to catch obvious accessibility and SEO issues.
- Ensure:
  - Pages have proper document skeleton and semantic landmarks.
  - Forms are labeled, errors are announced, and primary interactions are keyboard accessible.
  - No new inline JS/CSS has been introduced in production templates without explicit justification.

**See also:**
- `.cursor/rules/39-accessibility.mdc` — Accessibility & UX standards
- `.cursor/rules/50-lang-javascript.mdc` — JavaScript standards (form validation, state management)
- `examples/before-after/` — Security validation examples (HTML escaping, XSS prevention)
- `test/example-app/` — Canonical Clean Architecture demo (if HTML templates exist)

[RELATION TO ARCHITECTURE]
- HTML templates and markup:
  - Are not required to implement Clean Architecture/DDD layering themselves, but MUST NOT undermine backend architecture by embedding domain/business logic or direct data access into templates.
  - MUST treat backend/domain boundaries defined in `.cursor/rules/36-architecture.mdc` and `.cursor/rules/44-ddd.mdc` as constraints: domain logic lives in backend Domain/Application, not in inline scripts.
- HTML code MUST:
  - Follow accessibility standards in `.cursor/rules/39-accessibility.mdc`.
  - Respect security and data-handling rules in `.cursor/rules/30-security.mdc` and `.cursor/rules/3B-data-persistence.mdc` (e.g., no leaking secrets, safe escaping to prevent XSS).

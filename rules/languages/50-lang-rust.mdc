---
description: "Rust standards: safety, correctness, and tooling."
required: false
category: "language"
subcategory: "rust"
globs:
  - "**/*.rs"
---

[SOURCE OF TRUTH]
- Editable source: `rules/languages/50-lang-rust.mdc`
- Generated/consumed copy: `.cursor/rules/50-lang-rust.mdc` (keep references intact)

[INTENT]
- Define Rust standards (architecture alignment, testing, security).

[APPLICABILITY]
- Applies to Rust code; must align with architecture/security/testing spine unless explicit risk override per `.cursor/rules/3G-risk-overrides.mdc`.

[CROSS-REFERENCES]
- Architecture/DDD: `.cursor/rules/36-architecture.mdc`, `.cursor/rules/44-ddd.mdc` (binding)
- Testing/change-discipline: `.cursor/rules/31-testing.mdc`, `.cursor/rules/23-change-control.mdc` (binding)
- Risk overrides: `.cursor/rules/3G-risk-overrides.mdc` (explicit overrides only)

[RUST STANDARDS]
- Toolchain: stable Rust 2021+; pin via `rust-toolchain.toml`; prefer workspaces for multi-crate setups.
- Style/lint: `cargo fmt --all -- --check`; `cargo clippy --all-targets --all-features -D warnings`; avoid unwarranted `clone`.
- Safety: avoid `unsafe`; if necessary, isolate/justify and wrap safely; use `Result` + `thiserror`; avoid `unwrap`/`expect` outside tests/startup.
- Testing: `cargo test --all`; add property-based tests (`proptest`/`quickcheck`) for invariants; separate unit (`mod tests`) vs integration (`tests/`).
- Security: validate inputs; parameterized queries/ORM; no SQL concat; run `cargo audit`; avoid unmaintained crates.
- Performance: measure before optimizing; prefer iterators; avoid needless allocations; bound async concurrency and add timeouts.
- Verification artifact: `cargo fmt --all -- --check && cargo clippy --all-targets --all-features -D warnings && cargo test --all && cargo audit`.

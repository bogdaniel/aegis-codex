---
description: "Operations & incident management: runbooks, incidents, post-incident review, operational readiness."
required: true
category: "topic"
subcategory: "operations"
globs:
  - "docs/**"
  - "runbooks/**"
  - "infra/**"
  - "scripts/**"
---

[SOURCE OF TRUTH]
- Editable source: `rules/3D-operations.mdc`
- Generated/consumed copy: `.cursor/rules/3D-operations.mdc` (keep references intact)

[OPERATIONS & INCIDENT MANAGEMENT BASELINE]

### [RUNBOOKS]

#### Operational Runbooks
- **MANDATORY:** Tier H/M contexts MUST have operational runbooks:
  - **MUST:** Document startup procedures (how to start services, dependencies, configuration).
  - **MUST:** Document shutdown procedures (graceful shutdown, cleanup, data persistence).
  - **MUST:** Document emergency procedures (failover, rollback, data recovery).
- **MANDATORY:** Runbooks MUST be:
  - **Location:** `docs/runbooks/[ContextName].md` or `[ContextName]/docs/runbook.md`.
  - **Format:** Markdown with clear steps, commands, and checkpoints.
  - **Tested:** Runbooks are tested in staging environment (not just documented).
  - **Updated:** Runbooks are updated when procedures change.
- **Verification:** Check that Tier H/M contexts have runbooks; runbooks are tested and updated.

#### Runbook Contents
- **MANDATORY:** Runbooks MUST include:
  - **Prerequisites:** Required tools, access, credentials (via secret manager).
  - **Startup:** Step-by-step startup procedures with verification checkpoints.
  - **Shutdown:** Step-by-step shutdown procedures with data persistence checks.
  - **Emergency:** Emergency procedures (failover, rollback, data recovery).
  - **Troubleshooting:** Common issues and solutions.
  - **Contacts:** On-call contacts, escalation paths.
- **Verification:** Check that runbooks include all required sections; runbooks are complete.

### [INCIDENTS]

#### Severity Levels
- **MANDATORY:** Incidents MUST be classified by severity:
  - **SEV-1 (Critical):**
    - **Impact:** Service completely down; data loss; security breach.
    - **Response time:** Immediate (on-call responds within 15 minutes).
    - **Resolution target:** 4 hours or less.
  - **SEV-2 (High):**
    - **Impact:** Service degraded; partial functionality loss; performance issues.
    - **Response time:** Within 1 hour.
    - **Resolution target:** 8 hours or less.
  - **SEV-3 (Medium):**
    - **Impact:** Minor issues; non-critical features affected.
    - **Response time:** Within 4 hours.
    - **Resolution target:** 24 hours or less.
- **MANDATORY:** Severity levels MUST be:
  - **Documented:** Severity definitions in incident response playbook.
  - **Consistent:** Same severity definitions across all contexts.
  - **Reviewed:** Severity levels reviewed and updated based on incident history.
- **Verification:** Check that severity levels are documented; severity levels are consistent and reviewed.

#### Incident Lifecycle
- **MANDATORY:** Incident lifecycle MUST follow these stages:
  - **Detection:** How incidents are detected (monitoring, alerts, user reports).
  - **Mitigation:** Immediate steps to restore service (rollback, failover, hotfix).
  - **Communication:** Status updates to stakeholders (status page, Slack, email).
  - **Resolution:** Root cause identified and fixed (permanent fix, not workaround).
  - **Postmortem:** Post-incident review with action items (see Post-Incident Review section).
- **MANDATORY:** Incident lifecycle MUST be:
  - **Documented:** Incident response playbook with procedures for each stage.
  - **Practiced:** Regular incident drills (quarterly for Tier H contexts).
  - **Improved:** Incident response procedures updated based on postmortems.
- **Verification:** Check that incident lifecycle is documented; incident response is practiced and improved.

#### Incident Communication
- **MANDATORY:** Incident communication MUST include:
  - **Status page:** Public status page for service outages (if applicable).
  - **Internal updates:** Slack/email updates for internal stakeholders.
  - **Customer communication:** Customer-facing updates for service outages (if applicable).
  - **Timeline:** Incident timeline with key events (detection, mitigation, resolution).
- **MANDATORY:** Communication MUST be:
  - **Timely:** Updates every 30 minutes during active incidents (SEV-1/SEV-2).
  - **Accurate:** Factual information only (no speculation).
  - **Actionable:** Clear next steps and expected resolution time.
- **Verification:** Check that incident communication is timely, accurate, and actionable.

### [POST-INCIDENT REVIEW]

#### RCA Expectations
- **MANDATORY:** Post-incident review MUST include:
  - **Root cause analysis (RCA):** What caused the incident (technical root cause, not symptoms).
  - **Timeline:** Detailed timeline of events (detection, mitigation, resolution).
  - **Impact:** Service impact (downtime, affected users, data loss).
  - **Contributing factors:** What made the incident worse (missing monitoring, slow response, etc.).
- **MANDATORY:** RCA MUST be:
  - **Blame-free:** Focus on process and systems, not individuals.
  - **Evidence-based:** Use logs, metrics, traces to support conclusions.
  - **Actionable:** Identify specific improvements (not vague recommendations).
- **Verification:** Check that RCA is blame-free, evidence-based, and actionable.

#### Action Items
- **MANDATORY:** Post-incident review MUST produce action items:
  - **MUST:** Each action item has clear description, owner, and deadline.
  - **MUST:** Action items are tracked (Jira, GitHub Issues, or equivalent).
  - **MUST:** Action items are reviewed in follow-up meetings (30 days after incident).
- **MANDATORY:** Action items MUST be:
  - **Prioritized:** High-priority items (prevent recurrence) completed first.
  - **Measurable:** Success criteria for each action item.
  - **Accountable:** Clear ownership (team, role, individual).
- **Verification:** Check that action items have owners and deadlines; action items are tracked and reviewed.

#### Postmortem Document
- **MANDATORY:** Post-incident review MUST produce postmortem document:
  - **Location:** `docs/postmortems/[YYYY-MM-DD]-[IncidentName].md`.
  - **Format:** Markdown with sections for timeline, RCA, impact, action items.
  - **Template:** Use consistent template across all incidents.
- **MANDATORY:** Postmortem document MUST be:
  - **Published:** Available to all teams (not just incident responders).
  - **Reviewed:** Reviewed by leadership and security team (for SEV-1 incidents).
  - **Archived:** Archived for future reference (lessons learned, patterns).
- **Verification:** Check that postmortem documents are published, reviewed, and archived.

### [OPERATIONAL READINESS]

#### Pre-Launch Requirements
- **MANDATORY:** Tier H contexts MUST meet operational readiness requirements before going live:
  - **Runbooks:** Operational runbooks documented and tested.
  - **Dashboards:** Monitoring dashboards configured (latency, error rates, throughput).
  - **Alerts:** Alerts configured for critical metrics (error rates, latency, availability).
  - **On-call rotation:** On-call rotation defined and staffed.
  - **Incident response:** Incident response playbook documented and practiced.
  - **Postmortem process:** Postmortem process defined and ready.
- **MANDATORY:** Operational readiness MUST be:
  - **Verified:** Operational readiness review (ORR) before launch.
  - **Documented:** Operational readiness checklist completed.
  - **Approved:** Leadership approval for Tier H contexts.
- **Verification:** Check that Tier H contexts meet operational readiness requirements; ORR is completed before launch.

#### Monitoring & Alerting
- **MANDATORY:** Tier H/M contexts MUST have:
  - **Dashboards:** Real-time dashboards for key metrics (latency, error rates, throughput).
  - **Alerts:** Alerts for critical metrics (error rates > threshold, latency > SLO).
  - **Runbooks:** Runbooks reference dashboards and alerts (where to look, what to check).
- **MANDATORY:** Monitoring & alerting MUST align with `.cursor/rules/32-observability.mdc`:
  - **MUST:** Use structured logging with correlation IDs.
  - **MUST:** Track RED metrics (rate, errors, duration).
  - **MUST:** Set up alerting for SLO violations.
- **Verification:** Check that monitoring & alerting are configured; dashboards and alerts are documented in runbooks.

#### On-Call Rotation
- **MANDATORY:** Tier H/M contexts MUST have:
  - **On-call rotation:** Defined rotation schedule (primary, secondary, escalation).
  - **On-call tools:** PagerDuty, Opsgenie, or equivalent (alert routing, escalation).
  - **On-call runbooks:** Quick reference guides for common issues.
- **MANDATORY:** On-call rotation MUST be:
  - **Staffed:** Always have on-call engineer available (24/7 for Tier H contexts).
  - **Trained:** On-call engineers trained on runbooks and procedures.
  - **Supported:** Escalation paths for complex issues.
- **Verification:** Check that on-call rotation is defined and staffed; on-call engineers are trained.

### [INTEGRATION WITH EXISTING RULES]

#### Observability Rules
- **MANDATORY:** Operations MUST align with `.cursor/rules/32-observability.mdc`:
  - **MUST:** Use structured logging with correlation IDs.
  - **MUST:** Track RED metrics (rate, errors, duration).
  - **MUST:** Set up alerting for SLO violations.
- **Verification:** Check that operations align with observability rules; monitoring and alerting are configured.

#### Performance Rules
- **MANDATORY:** Operations MUST align with `.cursor/rules/33-performance.mdc`:
  - **MUST:** Monitor performance metrics (latency, throughput).
  - **MUST:** Set up alerts for performance degradation.
  - **MUST:** Document performance targets in runbooks.
- **Verification:** Check that operations align with performance rules; performance metrics are monitored.

#### CI/CD Rules
- **MANDATORY:** Operations MUST align with `.cursor/rules/34-ci.mdc`:
  - **MUST:** Use canary/blue-green deployments for Tier H/M contexts.
  - **MUST:** Health/readiness checks mandatory.
  - **MUST:** Auto-rollback on triggers (p95 latency +20%/15m, error rate +0.5%/10m).
- **Verification:** Check that operations align with CI/CD rules; deployment strategies are documented.

### [AGENT RESPONSIBILITIES]

#### @architect
- **MANDATORY:** @architect MUST:
  - **Design for operations:** Consider operational requirements during architecture design.
  - **Document runbooks:** Create initial runbooks for Tier H/M contexts.
  - **Review operational readiness:** Participate in ORR for Tier H contexts.
- **Verification:** Check that @architect designs for operations; runbooks are created and reviewed.

#### @devops / @sre
- **MANDATORY:** @devops / @sre MUST:
  - **Create runbooks:** Create and maintain operational runbooks.
  - **Configure monitoring:** Set up dashboards and alerts.
  - **Manage incidents:** Lead incident response and postmortems.
- **Verification:** Check that @devops / @sre create runbooks; monitoring and incident management are configured.

### [VERIFICATION]

- **Runbooks:** Check that Tier H/M contexts have runbooks; runbooks are tested and updated.
- **Incidents:** Check that severity levels are documented; incident lifecycle is followed.
- **Post-incident review:** Check that RCA is completed; action items have owners and deadlines.
- **Operational readiness:** Check that Tier H contexts meet operational readiness requirements; ORR is completed.
- **Agent responsibilities:** Check that @architect and @devops / @sre fulfill operational responsibilities.

**See also:**
- `.cursor/rules/32-observability.mdc` — Observability standards (logging, metrics, traces)
- `.cursor/rules/33-performance.mdc` — Performance standards (latency, throughput, SLOs)
- `.cursor/rules/34-ci.mdc` — CI/CD standards (deployment, rollback, health checks)
- `.cursor/rules/36-architecture.mdc` — Architecture rules (bounded contexts, trust tiers)
- `docs/runbooks/` — Operational runbooks
- `docs/postmortems/` — Post-incident reviews
